<!-- REPLACE WHOLE FILE: /store/san-pham-so.html -->
<!doctype html><html lang="vi"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Sản phẩm số | MXD</title>
<meta name="description" content="Danh mục Sản phẩm số — hiển thị sản phẩm từ affiliates.json theo chuẩn MXD."/>
<link rel="canonical" href="https://nxphuong.github.io/store/san-pham-so.html"/>
<meta name="robots" content="index,follow"/>
<meta property="og:title" content="Sản phẩm số | MXD"/>
<meta property="og:description" content="Danh mục Sản phẩm số"/>
<meta property="og:url" content="https://nxphuong.github.io/store/san-pham-so.html"/>
<meta property="og:image" content="https://nxphuong.github.io/assets/og/cat-san-pham-so.webp"/>
<link rel="stylesheet" href="/assets/site.css"/>
<script defer src="/assets/analytics.js"></script>
<script defer src="/assets/mxd-affiliate.js"></script>
</head>
<body>
<header class="topbar"><div class="container nav">
  <a class="brand" href="/">Cửa hàng liên kết</a>
  <nav>
    <a href="/">Trang chủ</a>
    <a href="/store.html">Cửa hàng</a>
    <a href="/store/thoi-trang.html">Thời trang</a>
    <a href="/store/my-pham.html">Mỹ phẩm</a>
    <a href="/store/me-va-be.html">Mẹ & Bé</a>
    <a href="/store/trang-suc.html">Trang sức</a>
    <a href="/store/san-pham-so.html">Sản phẩm số</a>
    <a href="/lien-he.html">Liên hệ</a>
  </nav>
</div></header>

<header class="container"><h1>Sản phẩm số</h1></header>
<main class="container">

  <div class="category-intro">
    <p>Thế giới số đang thay đổi cách chúng ta làm việc và giải trí. Danh mục “Sản phẩm số” giới thiệu các phần mềm, khóa học online, công cụ sáng tạo, thiết kế, marketing, và tiện ích kỹ thuật số hữu ích. Tất cả đều được chọn từ những nền tảng uy tín, có đánh giá thực tế và ưu đãi tốt. Dù bạn là người học, nhà sáng tạo nội dung, doanh nhân hay freelancer – đây là nơi giúp bạn phát triển kỹ năng, nâng cao hiệu suất và mở rộng cơ hội. “Sản phẩm số” – đầu tư cho tri thức, khởi đầu cho thành công bền vững.</p>
  </div>

  <div id="grid" class="product-grid"><p>Đang tải…</p></div>
</main>
<footer><div class="container"><small class="muted">MXD — category hub</small></div></footer>

<script>
/* category hub loader v2025-11-02 — slug=san-pham-so */
const SLUG = 'san-pham-so';
const $ = (id)=>document.getElementById(id);

function priceText(v){ const n=Number(v); return Number.isFinite(n)? n.toLocaleString('vi-VN')+' ₫' : ''; }
function imgPath(p){ return p.image || ('/assets/img/products/'+p.sku+'.webp'); }
function card(p){
  const origin = p.origin_url ?? p.origin ?? '#';
  const priceRaw = p.price_vnd ?? p.price;
  const price = priceText(priceRaw);
  return `
    <div class="card product-card">
      <a class="product-meta" href="${origin}"
         data-merchant="${p.merchant||''}" data-sku="${p.sku}"
         data-img="${imgPath(p)}" ${Number.isFinite(Number(priceRaw))?`data-price="${Number(priceRaw)}"`:''}>${p.name}</a>
      <img src="${imgPath(p)}" alt="${p.name}"/>
      ${price?`<p><strong>${price}</strong></p>`:''}
      <p><span class="badge">${p.merchant||''}</span></p>
      <p><a class="btn buy" href="#">Mua ngay</a></p>
    </div>`;
}

async function loadAffiliates(){
  const candidates=['/assets/data/affiliates.json','/affiliates.json'];
  for(const url of candidates){
    try{
      const r=await fetch(url,{cache:'no-store'});
      if(r.ok){
        const j=await r.json();
        if(Array.isArray(j)) return j;
      }
    }catch(e){}
  }
  return [];
}

(async()=>{
  try{
    const list = await loadAffiliates();
    const items = list
      .filter(p => ((p.category||'').toLowerCase().startsWith(SLUG)) && (p.status !== false))
      .slice(0,60);
    $('grid').innerHTML = items.length ? items.map(card).join('') : '<p>Chưa có sản phẩm trong danh mục này.</p>';

    // JSON-LD ItemList
    const itemList = {"@context":"https://schema.org","@type":"ItemList","itemListElement":items.map((p,i)=>({"@type":"ListItem","position":i+1,"url":new URL('/g.html?sku='+encodeURIComponent(p.sku),location.origin).href}))};
    const s=document.createElement('script'); s.type='application/ld+json'; s.textContent=JSON.stringify(itemList); document.head.appendChild(s);
  }catch(e){
    $('grid').innerHTML = '<p>Lỗi tải dữ liệu.</p>';
    console.error(e);
  }

  // MXD-CHECK: SW register
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').catch(()=>{});
  }
})();
</script>
</body></html>
